<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SP-HUB | å‰µå»ºåœ˜éšŠ</title>
  <link rel="stylesheet" href="../../static/css/styles.css">
  <link href="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.snow.css" rel="stylesheet"/>
  <script src="https://kit.fontawesome.com/04a6b0e02e.js" crossorigin="anonymous"></script>
</head>
<body>

<header class="glass-header" style="padding: 0.5rem 2rem">
  <nav class="nav-container">
    <a href="../../" style="text-decoration: none; color: black;"><h1>SP-HUB</h1></a>
    <form method="GET" action="{% url 'explore' %}" class="search-container">
      <i class="fas fa-search search-icon"></i>
      <input type="text" 
             class="search-bar" 
             name="search_query"
             placeholder="æœå°‹å°ˆæ¡ˆã€ä½œè€…æˆ–æè¿°..."
             value="{{ search_query|default:'' }}">
      <button type="submit" class="search-btn" style="display: none;"></button>
    </form>
    
    <div class="nav-links">
      <a href="/post/create_post" class="nav-btn neon-hover active"><i class="fas fa-plus-circle"></i>å‰µå»ºåœ˜éšŠ</a>
      <a href="../../explore" class="nav-btn neon-hover"><i class="fas fa-users"></i>æ¢ç´¢åœ˜éšŠ</a>
      {% if request.user.is_authenticated %}
      <div class="user-dropdown">
        <button class="user-profile nav-btn neon-hover" style="background: var(--primary-green);">
          <i class="fas fa-user-astronaut"></i>
          <span>{{ request.user.username }}</span>
        </button>
        <div class="dropdown-content">
          <a href="#"><i class="fas fa-cog"></i>å€‹äººè¨­å®š</a>
          <a href="/account/logout"><i class="fas fa-sign-out-alt"></i>ç™»å‡º</a>
        </div>
      </div>
      {% else %}
      <a href="/account/login" class="nav-btn neon-hover"><i class="fas fa-sign-in-alt"></i>ç™»å…¥</a>
      <a href="/account/register" class="nav-btn neon-hover"><i class="fas fa-user-plus"></i>è¨»å†Š</a>
      {% endif %}
    </div>
  </nav>
  <div class="header-gradient"></div>
</header>

<div class="content" style="margin-top: 2%;">
  <div class="section-header">
    <h2 class="section-title" style="text-align: center;">
      <span class="highlight">å‰µå»ºæ–°åœ˜éšŠ</span>
    </h2>
    <div class="decorative-line"></div>
  </div>

  <div class="form-card">
    <form action="" method="POST" id="fuck">
      {% csrf_token %}
      <div class="form-group">
        <label for="title"><i class="fas fa-heading"></i> å°ˆæ¡ˆæ¨™é¡Œ</label>
        <input type="text" id="title" name="title" placeholder="è¼¸å…¥å°ˆæ¡ˆæ¨™é¡Œ" required class="form-input">
      </div>
      <div class="form-group">
        <label for="description"><i class="fas fa-comment-alt"></i> å°ˆæ¡ˆç°¡ä»‹</label>
        <input type="text" id="description" name="description" 
               placeholder="ç°¡çŸ­æè¿°å°ˆæ¡ˆå…§å®¹ï¼ˆå°‡é¡¯ç¤ºæ–¼æœå°‹é è¦½ï¼‰" 
               required class="form-input"
               maxlength="80">
      </div>
      <div class="form-group">
        <!-- æ­¤ label æ”¹æˆæŒ‡å‘ #editor -->
        <label for="editor"><i class="fas fa-pen-fancy"></i> å°ˆæ¡ˆè©³æƒ…</label>
        <div id="editor">
          <p>ğŸš€ å°ˆæ¡ˆç›®æ¨™ï¼š</p>
          <p>åœ¨æ­¤è©³ç´°èªªæ˜æ‚¨çš„å°ˆæ¡ˆç›®æ¨™ã€æŠ€è¡“éœ€æ±‚èˆ‡åˆä½œæ–¹å¼...</p>
          <p><br/></p>
        </div>
      </div>
      <input type="hidden" id="hidden-content" name="content">
      <button type="submit" class="nav-btn full-width-btn">
        <i class="fas fa-rocket"></i>
        <span>ç™¼ä½ˆå°ˆæ¡ˆ</span>
      </button>
    </form>
  </div>
</div>

<footer>
  <div class="footer" style="text-align: center;">
    <p>Copyright Â© 2025 Side Project Hub. All rights reserved.</p>
  </div>
</footer>

<!-- Include the Quill library -->
<script src="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function(){
  // è¨­å®šå­—å‹
  var fonts = ['SimSun', 'SimHei', 'Microsoft-YaHei', 'KaiTi', 'FangSong', 'Arial', 'Times-New-Roman', 'sans-serif'];
  var Font = Quill.import('formats/font');
  Font.whitelist = fonts;
  Quill.register(Font, true);

  // è¨­å®šå·¥å…·åˆ—é¸é …
  const toolbarOptions = [
    [{'size': ['small', false, 'large', 'huge']}],
    [{'font': fonts}],
    ['bold', 'italic', 'underline', 'strike'],
    ['blockquote', 'code-block'],
    ['link', 'image', 'video'],
    [{'list': 'ordered'}, {'list': 'bullet'}, {'list': 'check'}],
    [{'color': []}, {'background': []}],
    [{'align': []}],
  ];

  // åˆå§‹åŒ– Quill ç·¨è¼¯å™¨
  const quill = new Quill('#editor', {
    theme: 'snow',
    modules: {
      toolbar: toolbarOptions
    },
  });

  // å–å¾—è¡¨å–®èˆ‡éš±è—æ¬„ä½
  const form = document.querySelector('form');
  var hiddenInput = document.getElementById('hidden-content'); 
 
  document.addEventListener('submit', function(event) {
    event.preventDefault();
    hiddenInput.value = quill.root.innerHTML;
    document.getElementById('fuck').submit();
  });
});
</script>
</body>
</html>
